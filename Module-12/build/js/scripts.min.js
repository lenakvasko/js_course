"use strict";var list=document.querySelector(".list"),form=document.querySelector(".js-form"),input=document.querySelector(".js-input"),tittle=document.querySelector(".hide"),source=document.querySelector(".laptops-tpl").innerHTML.trim(),template=Handlebars.compile(source),urls=[];function allUrls(e){var t=e.reduce(function(e,t){return e+template(t)},"");list.innerHTML=t}function checkValidUrl(t){var e=/^(ftp|http|https):\/\/[^ "]+$/.test(t),r=urls.some(function(e){return e.url===t});if(!e||r)return r?alert("Such an url is existed!"):alert("It's unvalid url!");fetch("https://api.linkpreview.net/?key=5cd71a29bf3526610f7d14eb637f134f14713b1c85043&q=".concat(t)).then(function(e){if(e.ok)return e.json();throw new Error("Error"+e.statusText)}).then(function(e){urls.unshift({url:e.url,img:e.image}),allUrls(urls),set()}).catch(function(e){return console.log("Error: "+e)})}function set(){localStorage.setItem("fetchTags",JSON.stringify(urls))}function get(){var e=localStorage.getItem("fetchTags"),t=JSON.parse(e);if(null!==t)return t}function updateLocMas(){if(localStorage.getItem("fetchTags")){var e=JSON.parse(localStorage.getItem("fetchTags"));urls=e}}function handleDel(e){var t=e.target;"BUTTON"===t.nodeName&&(console.log(urls),allUrls(urls=urls.filter(function(e){return t.previousElementSibling.innerHTML!=e.url})),set())}form.addEventListener("submit",function(e){e.preventDefault(),console.log(input.value),checkValidUrl(input.value),allUrls(urls),set()}),list.addEventListener("click",handleDel),updateLocMas(),allUrls(get()),console.log(urls);